TODO for asep

big gui stuff
	delete via jquery, for one-check-per-class people.
	or, just have a checkbox on income page to select which classes to pay
	dealing with income/expense splits
		treat signup as an INVOICE, to apply a payment to
			so, when entering a check, let the user apply it
		treat income as a PAYMENT SPLIT
	add a line in checks, for any un-assigned check stuff!!
		and report it somewhere too!


autocomplete for payer would be nice
		
oh crap. how does she deal with partial refunds???
	i.e. waitlist? DO I NEED TO TRACK REFUND CHECKS?
	
reports first! THEN DO THE UI AGAIN based on the reports. try that.
	move the reports to a different controller, admin only permissions!
	Q the dashboard
		add financial summary for class
	A class summaries, financial -- same as above!
	E the sign up sheet
		add financial summary now
		uniquely name all the gridviews (css id)
	C calculating payments for teachers
	D payments for companies




validation/integrity checks needed
	http://www.yiiframework.com/extension/composite-unique-key-validatable/es
	splits add up! for checks, and for instructor percentages
		checks being the REALLY IMPORTANT ONE
	the student must be signed up for that class before it gets paid
	in other words, the two keys have to be dependent on each other
		an onchange validation, need to populate the other box
		and on validation, need to make sure they are signed up for the class
			before allowing them to pay for it

		
general gui questions MUST get dealt with
	sorting!
	searching!


small ui things
	date/time conversions
		do it in the load_model method!
		and before save in update/create.
		that is all. no problems, no muss, no fuss.
	finish putting datepickers in
		check expense
		check income
		deposit
		schoolcalendar
		expensse
		income


gui conundrums wrapped in enigmas
	clean up date and weekday formatting, using formatter in yii
		not my zhtml hack
		but beware the afterfind/beforevalidate crap!
			it could break my model start/end stuff VERY IMPORTANT!
			do it by overloading load_model and beforevalidate, instead
			BE CAREFUL!
		i could create a separate get/set that wraps it
			for every model that has dates in it. gah.
			or a wrapper that transforms them before/after manually
	waitlist is an interesting conundrum
	payments -> deposits
		i'll really need a pick list here!
		will need to pick the checks AT THE SAME TIME as entering
		of all payments not yet assigned to a deposit.
		how to move them to and fro?
		deposits MUST calculate out too
			there's a whole lot of reconciling that needs to go on here.
		will need a picklist of checks-not-yet-deposited
			this could be VERY easy.
			by default, a new deposit should have all of them.
	how to handle teachers who are students?
		reflextitve relation. dammit. they're not teachers of THIS
	checks get returned, she said, if they're waitlisted
		
---------------
CLEANUP

vital
	trap exceptions on save,  if there's an integrity constraint!
	add an EMPTY as a default for deposit on checks!	
	i need a wide layout with menu at top, major css/layout stuff
		it needs to be integrated into class for sure, and student
		i have it in a branch menuthrash. works with clips, nice!
	use either breadcrumbs or returnto, but be consistent!
		breadcrumbs is cleaner than returnto, but will it work?
	make edit button on reports an optional item, only if logged in
	
useful
	default sort for everytbing
	new student wizard really. ajaxy: class->student->import->signup
	new on pulldowns!! so new instructor at end of pulldown for instructor
	now make the save() actions check breadcrumbs, not returnto
	make the signup and received papework dates default to today on create
		js? or controller? i think it is easy, in controller prolly
	trap exception on populate for school days
	cjuiautocomplete for some things
	to avoid confusion, special case the company stuff
		if company is not PTO, show delivered, not deposited
			else  show deposited, not delivered
		if instructor type is company, show the company popup
			else hide company popup
		javascript in forms, something else in view
	probably should have sign-up order be settable by the admin
		but that's require some reorder code. which i did for the coop!!

cosmetic
	use the roster as the template for any index views, i have the css nice
	a nice jui popup when hovering over a cell, showing description!
	hide the view Cbutton for linktables, there's nothing to see anyway
		at least in cgridviews, sometimes
		or make it link to the dependent table, makes more sense
	year bump buttons on the expired and received datepickers
		didn't i do that already?
	dependent date/timepickers, i.e. start/end intelligently
	the goddamned times are wrong, they're not in am/pm time! they don't convert
		this is the timepicker brokenness, fix it

	
take out the key columns from linktable forms-- one-sided not 2-sided
	if i stick with those, if i don't replace them with something else



----------------
STUCK

open questions
	how do you know who to write the check to (from that report)?
	deleting/cancelling a class
	returning a check! do you just delete it?
	cost PER class? extra costs? total cost? how?
	will you have a case where the materials fee is NOT PER CLASS
		i.e. per year?


student payment status, i.e. enrollment with payment status


ok, forms starting to make sense
	for adding a check from student or class, DO NOT NEED TO SPLIT IT
		hell, i alredy know the student, class, AND amount! 
		just a single line, try cform builder!
		and, i can not bother with a popup for check
		hell, i can have an ajax popup for splits.
			make that form optional for create, but NOT optional for editing
	for adding payment through class or instructor, do NOT probably need it.
		ask heidi about that one tho. maybe redirect for now.
	for adding check through checks, put a tabular input!
		keep it simple. js to add/remove rows.
	for adding a payment through checks, will need tabular input
	for adding a STUDENT to a class, just do one form with both models!
		what if the students are already in there? it's just a signup.
			most will be.
			if not, then an entry?

			
finish the relational mappings
	a way to create/edit/save a dependent model with ONE field in relation
		or a FEW maybe
		use tom__'s stuff i think
		a common pattern, for a few important things
			income
			expense
			signup
			instructorassignmeent
			requirementstatus
	gui splits for income/expense
		for now handle it like instructors
			but the data entry would be way too complicated that way
		


----------------
FUTURE REQUIRD

must have for NEXT SESSION!
	a way to track current session, and sort by it!
		a menu at the top, i think: year, session. dependent dropdown
		how to default to the current session?
			i will PROBABLY need start/end dates for it in the session
			then i can check today's date.
			but, people will need to add classes for the NEXT session, no?
		default session/sy. same as coop.
			save in session.
			check at every page load, choose now as default if nkt set.
		save use default session unless set in get/post
		in future, warn or disallow when saving to past sy/session
	how to import/add new class from previous session
	again, an ajaxything or something, a popup
		but it's more than one model!
		relational deep copy!
		 	instructors, it'll need to create new joins for them. just them!
			and extra fees too  probably
			not students though. until parents sign them up! or income.


must have for NEXT YEAR:
	need some way to track the current school year. 
		yes, i remember now!!!! it took today's date, calculated month!
		so based on where you were in the calendar, you were this year or next
		aha, i think it will be a named scope
	picklist of STUDENTS could get huge, and need to be pared down
		how to determine when kids are no longer in ocean shore??
		current flag?
		also, grade needs to be updated every year somehow
	i will DEFINITELY need some kind of de-duping system
		like i had to do for the coop. it'll have to happen.



----------------
BELOW THE LINE
try editable datatable!
	go back and replace many_many and advanced with has_many and with-related
		requirementtype
		instructortype

joins from one side shouldn't have popups for that side!
	i.e. signups from class shouldn't have  class as a popup
	
make a validation rule to make sure that the instructors aren't getting > 100 % !!
	i.e. check to see if a class has > 100% total


visual show/add meeting dates
	a very quick datepicker adder!
	just a date, not hidden, and boom, it adds, maybe even ajaxy.
	in the meetingdates, join to school calendar and show that stuff!
		

----------------
NOWHERE



----------------
DONE

	get the button columns working
		http://ipsedixit.net/2devnull/121/cbuttoncolumn-extension-yii-framework
	maybe make day of week a proper dropdown with constants, enum
		hmm, days of week in mysql are 1-7 starting sunday. no 0. enum's ok.
		the dropdown is not properly showing the selected value
			look at docs
	new table for dropdown status,
		enrolled, waitlist, cancelled
			might get lazy and make this an enum too?
	time of day, am/pm, jtimepicker thing for start/endtime
